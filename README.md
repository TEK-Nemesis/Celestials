# Celestials

Celestials is a test project designed to experiment with multi-platform game development using C++17, SDL3, and OpenGL. It serves as a sandbox for testing cross-platform compatibility, build systems, and rendering techniques on Windows and Linux. This project was created with the assistance of Grok, an AI developed by xAI, to streamline development and debugging.

**Note**: This project is not planned for further development, as it was primarily a testbed for a future game.

**Repository URL**: [https://github.com/TEK-Nemesis/Celestials](https://github.com/TEK-Nemesis/Celestials)

## Project Overview

Celestials offers a dynamic 3D environment where you can change the time of day, season, and even switch to alien scenes. The Earth/Milky Way night scene features over 50 real satellites, including the Starlink train and the International Space Station (ISS). The alien night scene replaces these with 50+ sci-fi starships, complete with tactical formations and smoke/propulsion trails. The project includes numerous real constellations (north, east, west, south views) with planets and shooting stars. Random 3D terrains are generated using Perlin noise heightmaps, and shaders are utilized for elements like the sky and sun.

- **Purpose**: Test and validate multi-platform code for game development.
- **Technologies**:
  - C++17
  - SDL3 (with SDL3_ttf, SDL3_image)
  - OpenGL
  - Libraries: libnoise, nlohmann/json, GLM, GLEW, Box2D, ImGui
- **Build System**: CMake
- **Platforms**: Windows, Linux
- **License**: MIT License (see [LICENSE](#license) section)

## Attributions

- **sun.png**: Created by Love Mandala, sourced from [Vecteezy](https://www.vecteezy.com).
- **moon.png**: Created by Ovidiu Timplaru.
- **alien_planet.png**: Created by linearterra, sourced from [Vecteezy](https://www.vecteezy.com).

## Prerequisites

### Windows

- **Visual Studio 2022 Community Edition**:
  - Download for free from [Microsoft Visual Studio Downloads](https://visualstudio.microsoft.com/vs/community/).
  - Ensure the "Desktop development with C++" workload is installed.
- **CMake** (version 3.15 or higher), included with Visual Studio or installed separately.
- **Git** for cloning the repository and fetching dependencies.
- Ensure the following are available in your environment:
  - Visual C++ Redistributables (included with Visual Studio).
  - DirectX Runtime (for SDL3 dependencies).

### Linux

- **Ubuntu 22.04 LTS** or a compatible distribution.
- **Build Tools**:

  ```
  sudo apt update
  sudo apt install -y build-essential cmake git
  ```
- **Dependencies**:

  ```
  sudo apt install -y libgl1-mesa-dev libglu1-mesa-dev \
      libsdl3-dev libsdl3-ttf-dev libsdl3-image-dev \
      libfreetype6-dev libpng-dev libjpeg-dev zlib1g-dev
  ```

  Note: If SDL3 packages are not available in your package manager (since SDL3 is relatively new), you may need to build them from source. See the "Building SDL3 from Source on Linux" section below.

## Cloning the Repository

### Downloading the Project

To download the Celestials project, clone the repository from GitHub:

```
git clone https://github.com/TEK-Nemesis/Celestials.git
cd Celestials
```

Alternatively, you can download a ZIP file of the repository:
- Go to [https://github.com/TEK-Nemesis/Celestials](https://github.com/TEK-Nemesis/Celestials).
- Click the green `Code` button and select `Download ZIP`.
- Extract the ZIP file to your desired location and navigate to the project directory:
  ```
  cd <extracted-folder>/Celestials
  ```

## Building on Windows

### Using Visual Studio

1. **Generate Build Files**:

   - **Recommended**: Use the provided `build_vs2022.bat` script to automatically generate a Visual Studio 2022 solution. This script sets up both Debug and Release configurations and ensures all dependencies are correctly configured. Run:

     ```
     build_vs2022.bat
     ```
     This will generate a solution file (`Celestials.sln`) in the project root directory. Open it in Visual Studio 2022:

     ```
     Celestials.sln
     ```
     While using the batch file is not strictly necessary, it is highly recommended to simplify the setup process.

   - **Manual Setup** (if not using the batch file):
     - Open the project folder in Visual Studio 2022 (`File > Open > Folder`).
     - Visual Studio will automatically detect the `CMakeLists.txt` and prompt you to generate the CMake cache. If not, run:

       ```
       cd out\build\x64-Debug
       cmake ../../.. -G "Ninja"
       cd ..\x64-Release
       cmake ../../.. -G "Ninja"
       ```
     - This generates build files in `out\build\x64-Debug` and `out\build\x64-Release`.

2. **Build the Project**:

   - If using the solution generated by `build_vs2022.bat`, build both configurations in Visual Studio:
     - Select `Debug` or `Release` from the configuration dropdown.
     - Build the solution (`Build > Build Solution` or `F5` to build and run).
   - Alternatively, build from the command line:
     - Debug:

       ```
       cd out\build\x64-Debug
       cmake --build . --config Debug
       ```
     - Release:

       ```
       cd out\build\x64-Release
       cmake --build . --config Release
       ```

3. **Run the Game**:

   - The executable, DLLs, and resources will be in:
     - Debug: `out\x64-Debug`
     - Release: `out\x64-Release`
   - Run the game from Visual Studio (set `Celestials` as the startup project) or directly:

     ```
     out\x64-Debug\Celestials.exe
     out\x64-Release\Celestials.exe
     ```

### Notes for Windows

- Ensure the `thirdparty\sdl3_ttf` directory contains the precompiled binaries:
  - `lib\x64\SDL3_ttf.lib` and `lib\x64\SDL3_ttf.dll` for Debug.
  - `win32-x64\SDL3_ttf.dll` for Release.
- If you encounter `SDL3_ttf-NOTFOUND`, verify the `.lib` file exists in `thirdparty\sdl3_ttf\lib\x64`.

## Building on Linux

### Using CMake

1. **Generate Build Files**:

   ```
   mkdir build
   cd build
   cmake .. -DCMAKE_BUILD_TYPE=Debug
   ```

   For a Release build, use `-DCMAKE_BUILD_TYPE=Release`.

2. **Build the Project**:

   ```
   make -j$(nproc)
   ```

   - The executable and resources will be in `out/x64-Debug` for Debug or `out/x64-Release` for Release.

3. **Run the Game**:

   ```
   cd ../out/x64-Debug
   ./Celestials
   ```

   For Release:

   ```
   cd ../out/x64-Release
   ./Celestials
   ```

### Building SDL3 from Source on Linux

If SDL3 packages are not available in your package manager, build them from source:

1. **SDL3**:

   ```
   git clone https://github.com/libsdl-org/SDL.git -b release-3.2.10
   cd SDL
   mkdir build && cd build
   cmake ..
   make -j$(nproc)
   sudo make install
   cd ../..
   ```

2. **SDL3_ttf**:

   ```
   git clone https://github.com/libsdl-org/SDL_ttf.git -b main
   cd SDL_ttf
   mkdir build && cd build
   cmake ..
   make -j$(nproc)
   sudo make install
   cd ../..
   ```

3. **SDL3_image**:

   ```
   git clone https://github.com/libsdl-org/SDL_image.git -b main
   cd SDL_image
   mkdir build && cd build
   cmake ..
   make -j$(nproc)
   sudo make install
   cd ../..
   ```

## Troubleshooting

### Windows

- **SDL3_ttf-NOTFOUND Error**:
  - Ensure `thirdparty\sdl3_ttf\lib\x64\SDL3_ttf.lib` exists.
  - Verify the DLLs are in the correct locations (`lib\x64` for Debug, `win32-x64` for Release).
- **Missing Resources**:
  - Ensure the `resources` folder is copied to `out/x64-Debug/resources` or `out/x64-Release/resources` after the build.

### Linux

- **Missing Dependencies**:
  - If SDL3 or its extensions are missing, build them from source as described above.
  - Ensure OpenGL 3.3 is supported: `glxinfo | grep "OpenGL version"`.
- **Resource Loading Errors**:
  - Verify the `resources` folder is copied to the output directory (`out/x64-Debug/resources` or `out/x64-Release/resources`).

## Contributing

This project is a testbed for multi-platform development and is not planned for further development. However, contributions that improve cross-platform compatibility, build scripts, or documentation are welcome.

## License

This project is licensed under the MIT License. See the [LICENSE](#license) section below for details.

### MIT License

```
MIT License

Copyright (c) 2025 TEK-Nemesis

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```